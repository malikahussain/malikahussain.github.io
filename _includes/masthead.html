{% include base_path %}

<div class="masthead">
  <div class="masthead__inner-wrap">
    <a href="{{ base_path }}/" class="site-title">{{ site.title }}</a>
    <nav class="greedy-nav">
      <ul>
        {% for link in site.data.navigation.main %}
          {% if link.url contains 'http' %}
            {% assign domain = '' %}
          {% else %}
            {% assign domain = base_path %}
          {% endif %}
          <li><a href="{{ domain }}{{ link.url }}">{{ link.title }}</a></li>
        {% endfor %}
      </ul>
      <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode" title="Toggle dark/light mode">
        <span id="theme-icon">üåô</span>
      </button>
    </nav>
  </div>
</div>

<script>
  (function() {
    var btn = document.getElementById('theme-toggle');
    var icon = document.getElementById('theme-icon');
    var html = document.documentElement;

    function applyTheme(theme) {
      if (theme === 'dark') {
        html.setAttribute('data-theme', 'dark');
        icon.textContent = '‚òÄÔ∏è';
      } else {
        html.removeAttribute('data-theme');
        icon.textContent = 'üåô';
      }
    }

    // Set icon to match current theme (already applied in <head>)
    applyTheme(html.getAttribute('data-theme') || 'light');

    btn.addEventListener('click', function() {
      var current = html.getAttribute('data-theme');
      var next = current === 'dark' ? 'light' : 'dark';
      applyTheme(next);
      localStorage.setItem('theme', next);
    });
  })();
</script>
